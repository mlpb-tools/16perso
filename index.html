<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 16 Personnalit√©s - Mission Locale</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800;900&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Palette LS4YOU - Turquoise, Jaune, Rouge */
            --ls-turquoise: #5DD9C1;
            --ls-yellow: #FFD23F;
            --ls-red: #E84855;
            --ls-orange: #FFB84D;
            --ls-dark: #2C3E50;
            --ls-white: #FFFFFF;
            --ls-light-bg: #F8FAFC;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--ls-light-bg);
            color: var(--ls-dark);
            min-height: 100vh;
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
        }

        h1, h2, h3, .ls-font {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            letter-spacing: -0.04em;
        }

        /* --- ARRI√àRE-PLAN PUZZLE --- */
        .puzzle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .puzzle-shape {
            position: absolute;
            opacity: 0.12;
        }

        /* Cercle Jaune (Haut Gauche) */
        .puzzle-1 {
            top: -5%;
            left: -5%;
            width: 300px;
            height: 300px;
            background: var(--ls-yellow);
            border-radius: 50%;
        }

        /* Puzzle Turquoise (Haut Droite) */
        .puzzle-2 {
            top: 10%;
            right: 10%;
            width: 200px;
            height: 200px;
            background: var(--ls-turquoise);
            clip-path: polygon(0 0, 100% 0, 100% 70%, 85% 70%, 85% 85%, 70% 85%, 70% 100%, 0 100%);
            transform: rotate(15deg);
        }

        /* Cercle Rouge (Milieu Gauche) */
        .puzzle-3 {
            top: 40%;
            left: 5%;
            width: 150px;
            height: 150px;
            background: var(--ls-red);
            border-radius: 50%;
        }

        /* Puzzle Jaune (Bas Gauche) */
        .puzzle-4 {
            bottom: 5%;
            left: 15%;
            width: 250px;
            height: 250px;
            background: var(--ls-yellow);
            clip-path: polygon(0 0, 100% 0, 100% 100%, 30% 100%, 30% 85%, 15% 85%, 15% 70%, 0 70%);
            transform: rotate(-20deg);
        }

        /* Cercle Turquoise (Bas Droite) */
        .puzzle-5 {
            bottom: -10%;
            right: -5%;
            width: 350px;
            height: 350px;
            background: var(--ls-turquoise);
            border-radius: 50%;
        }

        /* Puzzle Rouge (Centre Droit) */
        .puzzle-6 {
            top: 50%;
            right: 5%;
            width: 180px;
            height: 180px;
            background: var(--ls-red);
            clip-path: polygon(0 0, 100% 0, 100% 70%, 85% 70%, 85% 85%, 70% 85%, 70% 100%, 0 100%);
            transform: rotate(10deg);
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .card {
            background: var(--ls-white);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 10px 40px rgba(29, 53, 87, 0.08);
            margin-bottom: 2rem;
            border: 1px solid rgba(29, 53, 87, 0.05);
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            z-index: 10;
        }

        .logos-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .project-logo {
            height: 60px;
            width: auto;
            object-fit: contain;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--ls-dark);
            text-transform: uppercase;
        }

        .header h1 .highlight {
            color: var(--ls-red);
        }

        .header p {
            font-size: 1.1rem;
            color: #64748b;
            font-weight: 500;
        }

        .intro-section {
            text-align: center;
        }

        .intro-section h2 {
            color: var(--ls-dark);
            margin-bottom: 1rem;
            font-size: 1.8rem;
            text-transform: uppercase;
        }

        .intro-section p {
            color: #64748b;
            margin-bottom: 1rem;
            font-size: 1.05rem;
            font-weight: 500;
        }

        .privacy-note {
            background: var(--ls-light-bg);
            padding: 1.2rem;
            border-radius: 12px;
            font-size: 0.9rem;
            color: #64748b;
            margin: 1.5rem 0;
            border-left: 4px solid var(--ls-turquoise);
        }

        .btn {
            background: var(--ls-dark);
            color: white;
            border: none;
            padding: 1.2rem 3rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(29, 53, 87, 0.2);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border-bottom: 4px solid #0f1f33;
            font-family: 'Montserrat', sans-serif;
        }

        .btn:hover {
            background: var(--ls-red);
            border-bottom-color: #a02020;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(211, 47, 47, 0.3);
        }

        .btn:active {
            transform: translateY(0);
            border-bottom-width: 0;
        }

        .progress-container {
            margin-bottom: 2rem;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--ls-turquoise), var(--ls-yellow), var(--ls-red));
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            margin-top: 0.8rem;
            color: var(--ls-dark);
            font-weight: 700;
            font-size: 0.95rem;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .question-card {
            margin-bottom: 2rem;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--ls-dark);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .question-category {
            display: inline-block;
            background: var(--ls-turquoise);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-bottom: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .options-container {
            display: flex;
            gap: 0.8rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .option-btn {
            flex: 1;
            min-width: 100px;
            padding: 1rem 0.8rem;
            border: 3px solid #e2e8f0;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--ls-dark);
        }

        .option-btn:hover {
            border-color: var(--ls-turquoise);
            background: rgba(93, 217, 193, 0.1);
            transform: translateY(-2px);
        }

        .option-btn.selected {
            border-color: var(--ls-red);
            background: var(--ls-red);
            color: white;
            box-shadow: 0 4px 15px rgba(232, 72, 85, 0.4);
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .nav-buttons button {
            flex: 1;
        }

        .result-card {
            text-align: center;
        }

        .personality-type {
            font-size: 5rem;
            font-weight: 900;
            color: var(--ls-red);
            margin: 1.5rem 0;
            letter-spacing: 0.3rem;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
        }

        .type-description {
            font-size: 1.15rem;
            color: #64748b;
            margin-bottom: 2rem;
            line-height: 1.8;
            font-weight: 500;
        }

        .strengths-section {
            margin: 2.5rem 0;
        }

        .strengths-section h3 {
            color: var(--ls-dark);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            text-transform: uppercase;
        }

        .strength-bar {
            margin-bottom: 1.5rem;
        }

        .strength-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 700;
            color: var(--ls-dark);
            font-size: 0.95rem;
        }

        .bar-container {
            width: 100%;
            height: 28px;
            background: #e2e8f0;
            border-radius: 14px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--ls-turquoise), var(--ls-yellow), var(--ls-red));
            border-radius: 14px;
            transition: width 1s ease;
        }

        .keywords-section {
            background: linear-gradient(135deg, rgba(255, 210, 63, 0.15), rgba(93, 217, 193, 0.15));
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            border: 2px solid var(--ls-turquoise);
        }

        .keywords-section h3 {
            color: var(--ls-dark);
            margin-bottom: 1.2rem;
            font-weight: 900;
            text-transform: uppercase;
        }

        .keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .keyword {
            background: white;
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            border: 3px solid var(--ls-red);
            color: var(--ls-red);
            font-weight: 700;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.02em;
        }

        .keyword:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(211, 47, 47, 0.25);
            background: var(--ls-red);
            color: white;
        }

        .ppa-link {
            background: white;
            padding: 1.2rem;
            border-radius: 10px;
            border-left: 6px solid var(--ls-orange);
            box-shadow: 0 2px 8px rgba(255, 184, 77, 0.15);
        }

        .ppa-link strong {
            color: var(--ls-dark);
            font-family: 'Montserrat', sans-serif;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .action-buttons button {
            flex: 1;
            min-width: 200px;
        }

        .share-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1.5rem;
        }

        .share-btn {
            padding: 0.9rem 1.8rem;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
        }

        .share-whatsapp {
            background: #25D366;
            color: white;
        }

        .share-whatsapp:hover {
            background: #1ea952;
            transform: translateY(-2px);
        }

        .share-email {
            background: #EA4335;
            color: white;
        }

        .share-email:hover {
            background: #c53727;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .personality-type {
                font-size: 3.5rem;
                letter-spacing: 0.2rem;
            }

            .option-btn {
                min-width: 80px;
                font-size: 0.8rem;
                padding: 0.8rem 0.5rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-buttons button {
                width: 100%;
            }

            .logos-container {
                gap: 1rem;
            }

            .project-logo {
                height: 45px;
            }
        }

        /* Carte PDF (cach√©e, pour g√©n√©ration) */
        #profileCard {
            position: fixed;
            left: -9999px;
            width: 794px;
            background: white;
            padding: 40px;
            font-family: 'Poppins', sans-serif;
        }

        #profileCard h1 {
            color: var(--ls-dark);
            font-size: 32px;
            text-align: center;
            margin-bottom: 20px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
        }

        #profileCard .type-badge {
            font-size: 60px;
            font-weight: 900;
            color: var(--ls-red);
            text-align: center;
            letter-spacing: 10px;
            margin: 20px 0;
            font-family: 'Montserrat', sans-serif;
        }

        #profileCard .keywords-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }

        #profileCard .keyword-item {
            background: var(--ls-light-bg);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--ls-red);
            font-weight: 600;
        }

        #profileCard .objectives {
            background: rgba(93, 217, 193, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid var(--ls-turquoise);
        }

        #profileCard .ppa-section {
            background: rgba(255, 210, 63, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid var(--ls-yellow);
        }

        #profileCard .qr-container {
            text-align: center;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <!-- Arri√®re-plan puzzle -->
    <div class="puzzle-bg">
        <div class="puzzle-shape puzzle-1"></div>
        <div class="puzzle-shape puzzle-2"></div>
        <div class="puzzle-shape puzzle-3"></div>
        <div class="puzzle-shape puzzle-4"></div>
        <div class="puzzle-shape puzzle-5"></div>
        <div class="puzzle-shape puzzle-6"></div>
    </div>

    <div class="container">
        <div class="header">
            <div class="logos-container">
                <img src="https://static.wixstatic.com/media/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif/v1/fill/w_224,h_60,al_c,q_80,enc_avif,quality_auto/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif" 
                     alt="Mission Locale Pays Basque" 
                     class="project-logo">
                <img src="https://www.lifeskills4you.eu/wp-content/uploads/2024/07/LS4YOU_Logo_whiteback.jpg" 
                     alt="LS4YOU Logo" 
                     class="project-logo">
            </div>
            <h1 class="ls-font">üß≠ Quiz 16 Personnalit√©s <span class="highlight">LS4YOU</span></h1>
        </div>

        <!-- INTRO -->
        <div id="introSection" class="card intro-section">
            <button class="btn" onclick="startQuiz()">Commencer le quiz</button>
        </div>

        <!-- QUIZ -->
        <div id="quizSection" class="card hidden">
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                <div class="progress-text">
                    Question <span id="currentQuestion">1</span> sur 30
                </div>
            </div>

            <div id="questionContainer"></div>

            <div class="nav-buttons">
                <button class="btn" onclick="previousQuestion()" id="prevBtn" style="display: none;">‚Üê Pr√©c√©dent</button>
                <button class="btn" onclick="nextQuestion()" id="nextBtn">Suivant ‚Üí</button>
            </div>
        </div>

        <!-- R√âSULTATS -->
        <div id="resultSection" class="card hidden">
            <div class="result-card">
                <h2>Votre type de personnalit√©</h2>
                <div class="personality-type" id="personalityType"></div>
                <div class="type-description" id="typeDescription"></div>

                <div class="strengths-section">
                    <h3>üìä Vos forces cl√©s (comp√©tences Mission Locale)</h3>
                    <div id="strengthsContainer"></div>
                </div>

                <div class="keywords-section">
                    <h3>üéØ Mots-cl√©s pour votre PPA</h3>
                    <div class="keywords" id="keywordsContainer"></div>
                    <div class="ppa-link">
                        <strong>üí° Int√©grez √† votre contrat ML :</strong>
                        <p id="ppaText"></p>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn" onclick="downloadProfile()">üì• T√©l√©charger mon profil (PDF)</button>
                    <button class="btn" onclick="restartQuiz()">üîÑ Refaire le quiz</button>
                </div>

                <div class="share-buttons">
                    <button class="share-btn share-whatsapp" onclick="shareWhatsApp()">üì± Partager WhatsApp</button>
                    <button class="share-btn share-email" onclick="shareEmail()">üìß Envoyer par email</button>
                </div>

                <div class="privacy-note" style="margin-top: 2rem;">
                    üí¨ <strong>Discutez de vos r√©sultats avec votre conseiller Mission Locale</strong> pour les int√©grer √† votre parcours personnalis√©.
                </div>
            </div>
        </div>
    </div>

    <!-- Carte profil cach√©e pour PDF -->
    <div id="profileCard"></div>

    <script>
        // DONN√âES DES QUESTIONS - 30 QUESTIONS TOTAL
        const questions = [
            // E/I (Extraversion/Introversion) - 8 questions
            { id: 1, text: "Dans un stage, je pose souvent des questions pour mieux comprendre les t√¢ches.", dimension: "EI", direction: "E", category: "Pro" },
            { id: 2, text: "Avec mes amis, je pr√©f√®re animer les discussions en groupe.", dimension: "EI", direction: "E", category: "Perso" },
            { id: 3, text: "Pour mes d√©placements, je discute facilement avec des inconnus (bus, covoit).", dimension: "EI", direction: "E", category: "Quotidien" },
            { id: 4, text: "En formation, je participe activement aux √©changes collectifs.", dimension: "EI", direction: "E", category: "Pro" },
            { id: 5, text: "Lors d'un hobby comme le sport, je motive l'√©quipe.", dimension: "EI", direction: "E", category: "Perso" },
            { id: 6, text: "Face au stress quotidien, je parle √† quelqu'un pour en discuter.", dimension: "EI", direction: "E", category: "Sant√©" },
            { id: 7, text: "Lors d'un entretien d'embauche, je me pr√©sente spontan√©ment avec assurance.", dimension: "EI", direction: "E", category: "Pro" },
            { id: 8, text: "Pour mes loisirs, je pr√©f√®re les activit√©s de groupe aux activit√©s solitaires.", dimension: "EI", direction: "E", category: "Perso" },
            
            // N/S (Intuition/Sensation) - 8 questions
            { id: 9, text: "Pour un stage, j'imagine des id√©es nouvelles pour am√©liorer les processus.", dimension: "NS", direction: "N", category: "Pro" },
            { id: 10, text: "Pour organiser mes RDV admin, je pense aux opportunit√©s futures.", dimension: "NS", direction: "N", category: "Quotidien" },
            { id: 11, text: "Dans mes hobbies, j'aime explorer des concepts abstraits (jeux strat, cr√©ation).", dimension: "NS", direction: "N", category: "Perso" },
            { id: 12, text: "En projet pro, je vois les possibilit√©s globales avant les d√©tails.", dimension: "NS", direction: "N", category: "Pro" },
            { id: 13, text: "Pour la mobilit√©, j'anticipe des solutions innovantes (apps, trajets alternatifs).", dimension: "NS", direction: "N", category: "Quotidien" },
            { id: 14, text: "Pour ma sant√©, je r√©fl√©chis √† des approches globales (habitudes long terme).", dimension: "NS", direction: "N", category: "Sant√©" },
            { id: 15, text: "En recherche d'emploi, je m'int√©resse aux tendances futures du march√© du travail.", dimension: "NS", direction: "N", category: "Pro" },
            { id: 16, text: "Pour mes finances personnelles, j'imagine des sc√©narios d'√©volution √† long terme.", dimension: "NS", direction: "N", category: "Quotidien" },
            
            // T/F (Pens√©e/Sentiment) - 7 questions
            { id: 17, text: "En stage, je priorise les d√©cisions logiques sur les relations.", dimension: "TF", direction: "T", category: "Pro" },
            { id: 18, text: "Pour mon budget admin, je fais des calculs objectifs.", dimension: "TF", direction: "T", category: "Quotidien" },
            { id: 19, text: "Avec amis, je r√©sous conflits par faits plut√¥t qu'√©motions.", dimension: "TF", direction: "T", category: "Perso" },
            { id: 20, text: "Feedback pro : je pr√©f√®re critique constructive directe.", dimension: "TF", direction: "T", category: "Pro" },
            { id: 21, text: "Choix mobilit√© : efficacit√© avant confort.", dimension: "TF", direction: "T", category: "Quotidien" },
            { id: 22, text: "Sant√© : je suis un plan rationnel (ex. sport mesur√©).", dimension: "TF", direction: "T", category: "Sant√©" },
            { id: 23, text: "Pour choisir une formation, j'analyse objectivement les d√©bouch√©s professionnels.", dimension: "TF", direction: "T", category: "Pro" },
            
            // J/P (Jugement/Perception) - 7 questions
            { id: 24, text: "Pour un stage, je respecte strictement les horaires et deadlines.", dimension: "JP", direction: "J", category: "Pro" },
            { id: 25, text: "Mes d√©marches admin sont planifi√©es √† l'avance.", dimension: "JP", direction: "J", category: "Quotidien" },
            { id: 26, text: "Hobbies : je termine toujours ce que je commence.", dimension: "JP", direction: "J", category: "Perso" },
            { id: 27, text: "Projet pro : je pr√©f√®re structure plut√¥t improvisation.", dimension: "JP", direction: "J", category: "Pro" },
            { id: 28, text: "Mobilit√© : itin√©raires organis√©s vs spontan√©s.", dimension: "JP", direction: "J", category: "Quotidien" },
            { id: 29, text: "Routine sant√© : emploi du temps fixe (sommeil, repas).", dimension: "JP", direction: "J", category: "Sant√©" },
            { id: 30, text: "Pour mes objectifs de vie, je cr√©e des plans d√©taill√©s avec √©tapes claires.", dimension: "JP", direction: "J", category: "Perso" }
        ];

        // PROFILS DES 16 TYPES
        const profiles = {
            ENTJ: {
                description: "Leader strat√©gique, organis√© et d√©cisif. Vous excellez dans la planification de projets et la prise de d√©cisions efficaces.",
                keywords: ["Leadership", "Organisation", "Initiative", "Pens√©e strat√©gique", "Prise de d√©cision", "Objectifs clairs", "Communication directe", "Pers√©v√©rance"],
                objectives: "Stage en gestion de projet, r√¥le de coordination d'√©quipe, d√©veloppement de vos comp√©tences manag√©riales",
                ppa: "Force leadership ‚Üí objectif stage responsabilit√©s. Comp√©tence organisation ‚Üí autonomie admin ML.",
                strengths: { cooperation: 85, initiative: 95, perseverance: 90, organization: 95, learning: 80, communication: 85, adaptability: 70, selfControl: 85 }
            },
            ENTP: {
                description: "Innovateur cr√©atif et d√©batteur enthousiaste. Vous aimez explorer de nouvelles id√©es et r√©soudre des probl√®mes complexes.",
                keywords: ["Cr√©ativit√©", "Innovation", "D√©bat constructif", "Apprentissage rapide", "Ouverture d'esprit", "R√©solution de probl√®mes", "Initiative", "Agilit√©"],
                objectives: "Stage startup/innovation, projets cr√©atifs, missions vari√©es avec autonomie",
                ppa: "Force cr√©ativit√© ‚Üí projet entrepreneurial ML. Comp√©tence apprentissage ‚Üí formation continue.",
                strengths: { cooperation: 75, initiative: 95, perseverance: 70, organization: 65, learning: 95, communication: 90, adaptability: 95, selfControl: 65 }
            },
            ENFJ: {
                description: "Communicateur inspirant et bienveillant. Vous excellez dans l'accompagnement des autres et la cr√©ation de liens.",
                keywords: ["Aisance relationnelle", "M√©diation", "Empathie", "Communication", "Coop√©ration", "Initiative sociale", "Organisation", "Discernement"],
                objectives: "Stage secteur social/√©ducatif, animation de groupe, d√©veloppement r√©seau professionnel",
                ppa: "Force aisance relationnelle ‚Üí stage contact public. Comp√©tence m√©diation ‚Üí r√©solution conflits √©quipe.",
                strengths: { cooperation: 95, initiative: 85, perseverance: 80, organization: 85, learning: 85, communication: 95, adaptability: 80, selfControl: 80 }
            },
            ENFP: {
                description: "Enthousiaste cr√©atif et explorateur d'opportunit√©s. Vous apportez de l'√©nergie positive et des id√©es nouvelles.",
                keywords: ["Cr√©ativit√© appliqu√©e", "Ouverture d'esprit", "Prise d'initiative", "Aisance relationnelle", "Capacit√© d'apprentissage", "Coop√©ration", "Agilit√©", "Optimisme"],
                objectives: "Initiative sociale (contact asso), apprentissage hobbies ‚Üí stage cr√©atif, coop√©ration amis ‚Üí √©quipe pro",
                ppa: "Force initiative ‚Üí projet associatif ML. Comp√©tence cr√©ativit√© ‚Üí stage secteur culturel.",
                strengths: { cooperation: 90, initiative: 95, perseverance: 70, organization: 65, learning: 90, communication: 90, adaptability: 95, selfControl: 70 }
            },
            ESTJ: {
                description: "Organisateur pragmatique et fiable. Vous assurez que les t√¢ches sont accomplies efficacement et dans les r√®gles.",
                keywords: ["Organisation", "Pers√©v√©rance", "Ponctualit√©", "Ma√Ætrise de soi", "Sens des responsabilit√©s", "Efficacit√©", "Rigueur", "Leadership op√©rationnel"],
                objectives: "Stage administration/logistique, missions avec proc√©dures claires, responsabilit√©s op√©rationnelles",
                ppa: "Force organisation ‚Üí autonomie d√©marches admin. Comp√©tence ponctualit√© ‚Üí stage horaires stricts.",
                strengths: { cooperation: 80, initiative: 75, perseverance: 95, organization: 95, learning: 75, communication: 80, adaptability: 65, selfControl: 90 }
            },
            ESTP: {
                description: "Pragmatique √©nergique et orient√© action. Vous aimez les d√©fis concrets et les r√©sultats imm√©diats.",
                keywords: ["Agilit√©", "Prise d'initiative", "Adaptabilit√©", "R√©solution pratique", "Aisance relationnelle", "√ânergie", "Pragmatisme", "R√©activit√©"],
                objectives: "Stage terrain/commerce, missions diversifi√©es, environnements dynamiques",
                ppa: "Force agilit√© ‚Üí stage multi-t√¢ches. Comp√©tence adaptabilit√© ‚Üí mobilit√© g√©ographique pro.",
                strengths: { cooperation: 85, initiative: 90, perseverance: 75, organization: 70, learning: 85, communication: 85, adaptability: 95, selfControl: 75 }
            },
            ESFJ: {
                description: "Aidant organis√© et attentionn√©. Vous cr√©ez une atmosph√®re positive et soutenez votre √©quipe.",
                keywords: ["Coop√©ration", "Aisance relationnelle", "Organisation", "Sens du service", "Empathie", "Ponctualit√©", "Entraide", "Harmonie"],
                objectives: "Stage services √† la personne, travail en √©quipe, missions relationnelles",
                ppa: "Force coop√©ration ‚Üí stage √©quipe soud√©e. Comp√©tence service ‚Üí secteur aide/soin.",
                strengths: { cooperation: 95, initiative: 75, perseverance: 85, organization: 90, learning: 80, communication: 90, adaptability: 75, selfControl: 85 }
            },
            ESFP: {
                description: "Animateur spontan√© et sociable. Vous apportez enthousiasme et positivit√© dans chaque situation.",
                keywords: ["Aisance relationnelle", "Agilit√©", "Adaptabilit√©", "Enthousiasme", "Coop√©ration", "Spontan√©it√©", "√ânergie positive", "Communication"],
                objectives: "Stage animation/√©v√©nementiel, contact client, environnements vivants",
                ppa: "Force aisance relationnelle ‚Üí stage accueil public. Comp√©tence agilit√© ‚Üí polyvalence missions.",
                strengths: { cooperation: 90, initiative: 85, perseverance: 75, organization: 70, learning: 85, communication: 95, adaptability: 95, selfControl: 70 }
            },
            INTJ: {
                description: "Strat√®ge ind√©pendant et visionnaire. Vous excellez dans l'analyse et la planification √† long terme.",
                keywords: ["Pens√©e strat√©gique", "Apprentissage autonome", "Organisation", "Analyse", "Pers√©v√©rance", "Innovation", "Ma√Ætrise de soi", "Discernement"],
                objectives: "Stage recherche/analyse, projets autonomes complexes, d√©veloppement comp√©tences techniques",
                ppa: "Force strat√©gie ‚Üí objectif projet long terme. Comp√©tence analyse ‚Üí stage √©tudes/data.",
                strengths: { cooperation: 70, initiative: 85, perseverance: 90, organization: 90, learning: 95, communication: 75, adaptability: 75, selfControl: 90 }
            },
            INTP: {
                description: "Penseur logique et curieux. Vous aimez comprendre en profondeur et r√©soudre des probl√®mes complexes.",
                keywords: ["Apprentissage continu", "Analyse logique", "Innovation", "Curiosit√© intellectuelle", "R√©solution de probl√®mes", "Ind√©pendance", "Cr√©ativit√© conceptuelle", "Pr√©cision"],
                objectives: "Stage technique/informatique, recherche, missions analytiques",
                ppa: "Force apprentissage ‚Üí formation technique continue. Comp√©tence analyse ‚Üí stage R&D.",
                strengths: { cooperation: 65, initiative: 80, perseverance: 85, organization: 70, learning: 95, communication: 70, adaptability: 85, selfControl: 80 }
            },
            INFJ: {
                description: "Conseiller id√©aliste et profond. Vous comprenez les autres et cherchez √† avoir un impact positif.",
                keywords: ["Discernement", "M√©diation", "Empathie profonde", "√âcoute active", "Pers√©v√©rance", "Vision", "Harmonie", "Accompagnement"],
                objectives: "Stage conseil/orientation, accompagnement social, missions √† impact humain",
                ppa: "Force discernement ‚Üí stage conseil jeunes. Comp√©tence m√©diation ‚Üí gestion conflits pro.",
                strengths: { cooperation: 90, initiative: 80, perseverance: 90, organization: 85, learning: 90, communication: 85, adaptability: 75, selfControl: 90 }
            },
            INFP: {
                description: "Id√©aliste authentique et cr√©atif. Vous valorisez l'authenticit√© et cherchez un sens √† votre travail.",
                keywords: ["Cr√©ativit√©", "Empathie", "Valeurs personnelles", "Apprentissage significatif", "Ouverture d'esprit", "Authenticit√©", "Expression", "Adaptation"],
                objectives: "Stage secteur culturel/cr√©atif, missions align√©es valeurs, travail autonome cr√©atif",
                ppa: "Force cr√©ativit√© ‚Üí stage art/culture. Comp√©tence valeurs ‚Üí projet engagement associatif.",
                strengths: { cooperation: 85, initiative: 75, perseverance: 80, organization: 70, learning: 90, communication: 80, adaptability: 85, selfControl: 75 }
            },
            ISTJ: {
                description: "Organisateur consciencieux et fiable. Vous accomplissez vos t√¢ches avec rigueur et pr√©cision.",
                keywords: ["Pers√©v√©rance", "Organisation", "Ponctualit√©", "Ma√Ætrise de soi", "Rigueur", "Fiabilit√©", "Sens du devoir", "Pr√©cision"],
                objectives: "Admin autonomie + routine sant√©. Stage proc√©dures rigoureuses, missions d√©taill√©es",
                ppa: "Force pers√©v√©rance ‚Üí objectif dipl√¥me long. Comp√©tence organisation ‚Üí autonomie totale admin.",
                strengths: { cooperation: 80, initiative: 70, perseverance: 95, organization: 95, learning: 85, communication: 75, adaptability: 70, selfControl: 95 }
            },
            ISTP: {
                description: "Analyste pratique et autonome. Vous r√©solvez efficacement les probl√®mes techniques concrets.",
                keywords: ["R√©solution pratique", "Adaptabilit√© technique", "Agilit√©", "Analyse concr√®te", "Autonomie", "Efficacit√©", "D√©brouillardise", "Pr√©cision"],
                objectives: "Stage technique/maintenance, missions terrain, apprentissage pratique",
                ppa: "Force r√©solution ‚Üí stage r√©paration/technique. Comp√©tence autonomie ‚Üí missions ind√©pendantes.",
                strengths: { cooperation: 70, initiative: 85, perseverance: 85, organization: 75, learning: 90, communication: 70, adaptability: 90, selfControl: 85 }
            },
            ISFJ: {
                description: "Protecteur d√©vou√© et attentionn√©. Vous soutenez les autres avec constance et bienveillance.",
                keywords: ["Coop√©ration", "Pers√©v√©rance", "Empathie pratique", "Fiabilit√©", "Sens du service", "Organisation", "Attention aux d√©tails", "Soutien"],
                objectives: "Stage soin/service, soutien √©quipe, missions relationnelles stables",
                ppa: "Force coop√©ration ‚Üí stage √©quipe solidaire. Comp√©tence service ‚Üí secteur aide √† domicile.",
                strengths: { cooperation: 95, initiative: 70, perseverance: 90, organization: 90, learning: 85, communication: 85, adaptability: 75, selfControl: 90 }
            },
            ISFP: {
                description: "Artiste sensible et authentique. Vous appr√©ciez la beaut√© et exprimez votre cr√©ativit√©.",
                keywords: ["Cr√©ativit√© artistique", "Empathie", "Adaptabilit√©", "Authenticit√©", "Esth√©tique", "Harmonie", "Expression personnelle", "Sensibilit√©"],
                objectives: "Stage artisanat/arts, environnements cr√©atifs, missions expressives",
                ppa: "Force cr√©ativit√© ‚Üí stage design/mode. Comp√©tence empathie ‚Üí relation client personnalis√©e.",
                strengths: { cooperation: 85, initiative: 75, perseverance: 80, organization: 75, learning: 85, communication: 80, adaptability: 90, selfControl: 80 }
            }
        };

        // √âTAT DU QUIZ
        let currentQuestionIndex = 0;
        let answers = {};
        let personalityResult = '';

        // OPTIONS
        const options = [
            { value: 1, label: "1 - Pas du tout d'accord" },
            { value: 2, label: "2 - Plut√¥t pas" },
            { value: 3, label: "3 - Neutre" },
            { value: 4, label: "4 - Plut√¥t oui" },
            { value: 5, label: "5 - Totalement d'accord" }
        ];

        function startQuiz() {
            document.getElementById('introSection').classList.add('hidden');
            document.getElementById('quizSection').classList.remove('hidden');
            displayQuestion();
        }

        function displayQuestion() {
            const question = questions[currentQuestionIndex];
            const container = document.getElementById('questionContainer');
            
            container.innerHTML = `
                <div class="question-card">
                    <span class="question-category">${question.category}</span>
                    <div class="question-text">${question.text}</div>
                    <div class="options-container">
                        ${options.map(opt => `
                            <div class="option-btn ${answers[question.id] === opt.value ? 'selected' : ''}" 
                                 onclick="selectAnswer(${question.id}, ${opt.value})">
                                ${opt.label}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            updateProgress();
            updateNavigationButtons();
        }

        function selectAnswer(questionId, value) {
            answers[questionId] = value;
            displayQuestion();
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            prevBtn.style.display = currentQuestionIndex > 0 ? 'block' : 'none';
            
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = 'Voir mes r√©sultats ‚Üí';
            } else {
                nextBtn.textContent = 'Suivant ‚Üí';
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            const currentQuestion = questions[currentQuestionIndex];
            
            if (!answers[currentQuestion.id]) {
                alert('Veuillez r√©pondre √† cette question avant de continuer.');
                return;
            }

            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                calculateResults();
            }
        }

        function calculateResults() {
            // Calculer les scores pour chaque dimension
            let scores = {
                EI: 0,  // 8 questions, max = 40
                NS: 0,  // 8 questions, max = 40
                TF: 0,  // 7 questions, max = 35
                JP: 0   // 7 questions, max = 35
            };

            questions.forEach(q => {
                const answer = answers[q.id] || 3;
                if (q.direction === 'E' || q.direction === 'N' || q.direction === 'T' || q.direction === 'J') {
                    scores[q.dimension] += answer;
                }
            });

            // D√©terminer le type avec seuils adapt√©s
            // EI et NS : >24/40 = lettre positive (60% du max)
            // TF : >21/35 = lettre positive (60% du max)
            // JP : >21/35 = lettre positive (60% du max)
            let type = '';
            type += scores.EI > 24 ? 'E' : 'I';
            type += scores.NS > 24 ? 'N' : 'S';
            type += scores.TF > 21 ? 'T' : 'F';
            type += scores.JP > 21 ? 'J' : 'P';

            personalityResult = type;
            displayResults();
        }

        function displayResults() {
            document.getElementById('quizSection').classList.add('hidden');
            document.getElementById('resultSection').classList.remove('hidden');

            const profile = profiles[personalityResult];
            
            document.getElementById('personalityType').textContent = personalityResult;
            document.getElementById('typeDescription').textContent = profile.description;

            // Afficher les forces
            const strengthsContainer = document.getElementById('strengthsContainer');
            const strengthsLabels = {
                cooperation: 'Coop√©ration',
                initiative: 'Prise d\'initiative',
                perseverance: 'Pers√©v√©rance',
                organization: 'Organisation',
                learning: 'Capacit√© d\'apprentissage',
                communication: 'Communication',
                adaptability: 'Adaptabilit√©',
                selfControl: 'Ma√Ætrise de soi'
            };

            strengthsContainer.innerHTML = Object.keys(profile.strengths).map(key => `
                <div class="strength-bar">
                    <div class="strength-label">
                        <span>${strengthsLabels[key]}</span>
                        <span>${profile.strengths[key]}%</span>
                    </div>
                    <div class="bar-container">
                        <div class="bar-fill" style="width: ${profile.strengths[key]}%"></div>
                    </div>
                </div>
            `).join('');

            // Afficher les mots-cl√©s
            const keywordsContainer = document.getElementById('keywordsContainer');
            keywordsContainer.innerHTML = profile.keywords.map(kw => 
                `<div class="keyword">${kw}</div>`
            ).join('');

            // Texte PPA
            document.getElementById('ppaText').textContent = profile.ppa;

            // G√©n√©rer la carte PDF (cach√©e)
            generateProfileCard();
        }

        function generateProfileCard() {
            const profile = profiles[personalityResult];
            const card = document.getElementById('profileCard');

            card.innerHTML = `
                <h1>Mon Profil ${personalityResult} ‚Äì Forces pour PPA/ML</h1>
                <div class="type-badge">${personalityResult}</div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <div style="width: 150px; height: 150px; margin: 0 auto; background: linear-gradient(135deg, #2E7D32, #1976D2); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 48px; font-weight: 800;">
                        ${personalityResult.charAt(0)}
                    </div>
                    <p style="margin-top: 10px; font-size: 18px; color: #666;">${profile.description}</p>
                </div>

                <div class="keywords-grid">
                    ${profile.keywords.map(kw => `<div class="keyword-item">‚úì ${kw}</div>`).join('')}
                </div>

                <div class="objectives">
                    <h3 style="color: #1976D2; margin-bottom: 10px;">üéØ Objectifs sugg√©r√©s</h3>
                    <p>${profile.objectives}</p>
                </div>

                <div class="ppa-section">
                    <h3 style="color: #2E7D32; margin-bottom: 10px;">üíº Lien PPA Mission Locale</h3>
                    <p>${profile.ppa}</p>
                </div>

                <div class="qr-container">
                    <div id="qrcode" style="display: inline-block;"></div>
                    <p style="margin-top: 10px; font-size: 12px; color: #666;">Scannez pour refaire le quiz</p>
                </div>
            `;

            // G√©n√©rer QR code
            new QRCode(document.getElementById("qrcode"), {
                text: window.location.href,
                width: 100,
                height: 100
            });
        }

        function downloadProfile() {
            const card = document.getElementById('profileCard');
            
            html2canvas(card, { scale: 2 }).then(canvas => {
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                
                const imgData = canvas.toDataURL('image/png');
                const imgWidth = 210;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                
                pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
                pdf.save(`Profil-${personalityResult}-MissionLocale.pdf`);
            });
        }

        function shareWhatsApp() {
            const text = `J'ai d√©couvert mon profil ${personalityResult} avec le Quiz Mission Locale ! D√©couvre le tien : ${window.location.href}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        }

        function shareEmail() {
            const subject = `Mon profil ${personalityResult} - Quiz Mission Locale`;
            const body = `J'ai d√©couvert mon profil ${personalityResult} avec le Quiz 16 Personnalit√©s de Mission Locale.\n\nFais le quiz toi aussi : ${window.location.href}`;
            window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            answers = {};
            personalityResult = '';
            
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('introSection').classList.remove('hidden');
        }
    </script>
</body>
</html>
