<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Vibrer ‚Äî Ultra-ludique (choix uniquement)</title>
<style>
  :root{
    /* Couleurs inspir√©es du logo (rouge / turquoise / jaune / saumon / noir / blanc) */
    --red:#cb3234;
    --turq:#53e4cf;
    --yellow:#fecc2c;
    --salmon:#fca5a4;
    --black:#111;
    --white:#fff;

    --shadow: 0 14px 40px rgba(0,0,0,.12);
    --shadow2: 0 10px 26px rgba(0,0,0,.10);
    --rXL: 28px; --rLG: 20px; --rMD: 14px;
  }

  *{ box-sizing:border-box; }
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: var(--white);
    color: var(--black);
    overflow-x:hidden;
  }

  /* d√©cor */
  .bg{ position:fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden; }
  .blob{ position:absolute; width:520px; height:520px; border-radius:999px; opacity:.14; }
  .b1{ background:var(--salmon); left:-170px; top:-200px; }
  .b2{ background:var(--turq); right:-210px; top:110px; }
  .b3{ background:var(--yellow); left:20%; bottom:-280px; opacity:.10; }
  .dot{ position:absolute; width:14px; height:14px; border-radius:999px; opacity:.22; }
  .d1{ background:var(--turq); left:8%; top:42%; }
  .d2{ background:var(--yellow); left:18%; top:70%; }
  .d3{ background:var(--salmon); right:12%; top:26%; }
  .d4{ background:var(--red); right:20%; bottom:22%; opacity:.16; }

  .wrap{
    position:relative; z-index:1;
    width:min(980px, calc(100% - 28px));
    margin: 0 auto;
    padding: 16px 0 28px;
  }

  header{
    background:#fff;
    border-radius: var(--rXL);
    box-shadow: var(--shadow);
    border: 1px solid rgba(0,0,0,.08);
    overflow:hidden;
  }
  .top{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap: 12px;
    padding: 14px 16px;
  }
  .brand{
    display:flex; align-items:center; gap: 12px;
  }
  .brand img{ height:44px; width:auto; display:block; }
  .pill{
    display:inline-flex; align-items:center; gap:8px;
    padding: 8px 12px;
    border-radius: 999px;
    font-weight: 900;
    font-size: 12.5px;
    background: rgba(83,228,207,.16);
    border: 1px solid rgba(83,228,207,.32);
  }
  .pill i{ width:10px; height:10px; border-radius:999px; background:var(--turq); display:inline-block; }

  .hero{
    padding: 10px 16px 16px;
    display:grid;
    grid-template-columns: 1.2fr .8fr;
    gap: 14px;
    align-items:center;
    background:
      radial-gradient(circle at 20% 25%, rgba(252,165,164,.22), rgba(252,165,164,0) 52%),
      radial-gradient(circle at 82% 40%, rgba(83,228,207,.18), rgba(83,228,207,0) 55%),
      radial-gradient(circle at 60% 92%, rgba(254,204,44,.16), rgba(254,204,44,0) 55%);
  }
  @media(max-width:860px){ .hero{ grid-template-columns:1fr; } }

  h1{
    margin:0;
    font-size: clamp(24px, 3vw, 40px);
    line-height:1.05;
    font-weight: 1000;
    color: var(--red);
  }
  .sub{
    margin: 10px 0 0;
    font-size: 14px;
    color: rgba(0,0,0,.78);
    max-width: 62ch;
    font-weight: 650;
  }
  .mini{
    margin-top: 10px;
    font-size: 12.5px;
    font-weight: 900;
    color: rgba(0,0,0,.72);
  }

  .progress{
    background: rgba(0,0,0,.08);
    height: 10px;
    border-radius: 999px;
    overflow:hidden;
    margin-top: 8px;
  }
  .progress > div{
    height:100%;
    width:0%;
    border-radius: 999px;
    background: linear-gradient(90deg, var(--turq), var(--yellow), var(--salmon), var(--red));
    transition: width .25s ease;
  }

  .controls{
    display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;
  }
  button{
    appearance:none; border:none; cursor:pointer;
    padding: 10px 12px;
    border-radius: 999px;
    font-weight: 1000;
    font-size: 13px;
    box-shadow: var(--shadow2);
    display:inline-flex; gap:8px; align-items:center;
  }
  .ghost{ background: rgba(0,0,0,.04); color: rgba(0,0,0,.86); border:1px solid rgba(0,0,0,.12); box-shadow:none; }
  .primary{ background: var(--red); color:#fff; }
  .alt{ background: var(--turq); color: rgba(0,0,0,.88); }
  .warn{ background: var(--yellow); color: rgba(0,0,0,.88); }

  main{ margin-top: 14px; }

  /* carte "1 √©cran" */
  .screen{
    background:#fff;
    border-radius: var(--rXL);
    box-shadow: var(--shadow);
    border: 1px solid rgba(0,0,0,.08);
    overflow:hidden;
  }
  .screenHead{
    padding: 14px 16px;
    display:flex; justify-content:space-between; gap: 12px; align-items:flex-start;
    background:
      radial-gradient(circle at 12% 60%, rgba(252,165,164,.16), rgba(252,165,164,0) 55%),
      radial-gradient(circle at 85% 35%, rgba(83,228,207,.14), rgba(83,228,207,0) 55%);
  }
  .kicker{
    display:inline-flex; align-items:center; gap:8px;
    font-size: 12px;
    font-weight: 1000;
    padding: 7px 10px;
    border-radius: 999px;
    border: 1px solid rgba(0,0,0,.10);
    background:#fff;
  }
  .kicker .dot{
    position:static;
    width:10px;height:10px;border-radius:999px;opacity:1;
  }
  .k1 .dot{ background:var(--turq); }
  .k2 .dot{ background:var(--yellow); }
  .k3 .dot{ background:var(--salmon); }
  .k4 .dot{ background:var(--red); }

  .screenHead h2{
    margin: 10px 0 0;
    font-size: 18px;
    font-weight: 1000;
    color: rgba(0,0,0,.86);
  }
  .screenBody{ padding: 16px; }

  .question{
    font-size: 15px;
    font-weight: 950;
    margin: 0 0 12px;
  }

  /* choix */
  .choices{
    display:grid;
    grid-template-columns: 1fr;
    gap: 10px;
  }
  @media(min-width:860px){ .choices{ grid-template-columns: 1fr 1fr; } }

  .choice{
    display:flex;
    gap: 10px;
    align-items:flex-start;
    padding: 12px 12px;
    border-radius: 999px;
    background: #fff;
    border: 1px solid rgba(0,0,0,.12);
    cursor:pointer;
    user-select:none;
    font-weight: 900;
    line-height:1.25;
  }
  .choice .badge{
    width: 28px; height: 28px;
    border-radius: 999px;
    display:grid; place-items:center;
    font-weight: 1000;
    flex: 0 0 auto;
    color:#000;
  }
  .A{ background: var(--turq); }
  .B{ background: var(--yellow); }
  .C{ background: var(--salmon); }
  .D{ background: var(--red); color:#fff; }

  .choice.selected{
    border-color: rgba(0,0,0,.20);
    box-shadow: var(--shadow2);
    background:
      radial-gradient(circle at 20% 50%, rgba(83,228,207,.12), rgba(83,228,207,0) 55%),
      radial-gradient(circle at 70% 30%, rgba(254,204,44,.12), rgba(254,204,44,0) 55%),
      #fff;
  }

  /* missions (sans saisie) */
  .missionRow{
    display:flex; flex-wrap:wrap; gap: 10px;
  }
  .missionBtn{
    flex: 1 1 220px;
    justify-content:center;
    box-shadow: var(--shadow2);
  }
  .m1{ background: var(--turq); color: rgba(0,0,0,.88); }
  .m2{ background: var(--yellow); color: rgba(0,0,0,.88); }
  .m3{ background: var(--salmon); color: rgba(0,0,0,.88); }

  .footerNav{
    display:flex; gap: 10px; flex-wrap:wrap;
    justify-content: space-between;
    margin-top: 14px;
  }

  .resultBox{
    padding: 14px;
    border-radius: var(--rXL);
    border: 1px solid rgba(0,0,0,.10);
    background:
      radial-gradient(circle at 20% 50%, rgba(252,165,164,.14), rgba(252,165,164,0) 55%),
      radial-gradient(circle at 70% 30%, rgba(83,228,207,.12), rgba(83,228,207,0) 55%),
      #fff;
  }
  .pills{
    display:flex; flex-wrap:wrap; gap:8px; margin-top: 10px;
  }
  .p{
    display:inline-flex; gap:8px; align-items:center;
    padding: 8px 10px;
    border-radius: 999px;
    border: 1px solid rgba(0,0,0,.10);
    background:#fff;
    font-weight: 1000;
    font-size: 12px;
  }
  .p i{ width:10px;height:10px;border-radius:999px; display:inline-block; }
  .pA i{ background: var(--turq); }
  .pB i{ background: var(--yellow); }
  .pC i{ background: var(--salmon); }
  .pD i{ background: var(--red); }
  footer{
    margin-top: 14px;
    text-align:center;
    font-size: 12px;
    color: rgba(0,0,0,.62);
  }
</style>
</head>

<body>
<div class="bg" aria-hidden="true">
  <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>
  <div class="dot d1"></div><div class="dot d2"></div><div class="dot d3"></div><div class="dot d4"></div>
</div>

<div class="wrap">
  <header>
    <div class="top">
      <div class="brand">
        <img src="LS4YOU_Logo.png" alt="Life Skills logo">
        <span class="pill"><i></i> Ultra-ludique ‚Ä¢ Choix uniquement</span>
      </div>
      <div class="controls">
        <button class="ghost" id="btnReset" type="button">‚ôªÔ∏è R√©initialiser</button>
      </div>
    </div>

    <div class="hero">
      <div>
        <h1>Trouvez le job qui vous fait Vibrer</h1>
        <p class="sub">
          Parcours en cartes : tu choisis, tu avances. Aucun texte √† √©crire.
        </p>
        <div class="mini" id="stepInfo">√âcran 1/?</div>
        <div class="progress" aria-hidden="true"><div id="bar"></div></div>
      </div>
      <div class="controls" style="justify-content:flex-start;">
        <button class="alt" id="btnStart" type="button">‚ñ∂Ô∏è Commencer</button>
        <button class="ghost" id="btnJumpResult" type="button">üßæ Aller au r√©sum√©</button>
      </div>
    </div>
  </header>

  <main>
    <section class="screen" id="screen">
      <div class="screenHead">
        <div>
          <span class="kicker k1" id="kicker"><span class="dot"></span>√âtape</span>
          <h2 id="title">‚Ä¶</h2>
        </div>
      </div>
      <div class="screenBody" id="body"></div>
    </section>

    <footer>
      Aucune saisie ‚Ä¢ Choix uniquement ‚Ä¢ Donn√©es sauvegard√©es localement dans le navigateur
    </footer>
  </main>
</div>

<script>
/* =========================
   Contenu "choix uniquement"
   - Quiz A-D du livret (texte conserv√©)
   - ‚Äúmissions‚Äù pour les parties √† √©crire (sans saisie)
   - R√©sum√© final
========================= */

const LS_KEY = "vibrer_ultra_ludique_v1";

/* Quiz A-D (texte identique √† ce que tu avais dans la version pr√©c√©dente) */
const QUIZ = [
  {
    title:"1. CE QUI VOUS MOTIVE LE MATIN :",
    A:"Vous aimez les d√©fis et la nouveaut√© : Vous √™tes attir√© par des m√©tiers dynamiques, impr√©visibles, o√π vous pouvez r√©soudre des probl√®mes.",
    B:"Vous valorisez l‚Äôesprit d‚Äô√©quipe : Vous prosp√©rez dans des environnements collaboratifs o√π les relations interpersonnelles sont importantes.",
    C:"Vous pr√©f√©rez l'autonomie : Un travail ind√©pendant ou √† distance pourrait vous convenir, o√π vous pouvez g√©rer votre emploi du temps.",
    D:"Vous appr√©ciez la structure : Les m√©tiers avec des routines claires et une organisation bien d√©finie sont faits pour vous."
  },
  {
    title:"2. VOTRE ESPACE DE TRAVAIL ID√âAL :",
    A:"Vous aimez l‚Äô√©nergie et la cr√©ativit√© : Un bureau anim√©, un environnement start-up, ou des espaces de travail ouverts vous conviennent.",
    B:"Vous cherchez l‚Äôinteraction : Les environnements collaboratifs, les agences de cr√©ation ou les espaces de coworking vous attirent.",
    C:"Vous pr√©f√©rez le calme : Un travail √† domicile, en freelance, ou dans un bureau priv√© est id√©al pour vous.",
    D:"Vous aimez l‚Äôorganisation : Les entreprises bien structur√©es avec des bureaux personnels sont faites pour vous."
  },
  {
    title:"3. COMMENT VOUS ABORDEZ LES PROJETS :",
    A:"Vous √™tes adaptable et aimez improviser : Vous excellez dans des environnements o√π les t√¢ches sont vari√©es et changeantes.",
    B:"Vous aimez le brainstorming : Les r√¥les qui n√©cessitent de l‚Äôinnovation et de la collaboration sont parfaits pour vous.",
    C:"Vous pr√©f√©rez la planification : Vous √™tes √† l‚Äôaise dans des m√©tiers o√π l'organisation et la m√©thode sont essentielles.",
    D:"Vous suivez les proc√©dures : Un travail avec des normes et des processus √©tablis vous convient."
  },
  {
    title:"4. RAPPORT √Ä L‚ÄôAUTORIT√â ET √Ä LA HI√âRARCHIE :",
    A:"Vous pr√©f√©rez des structures plates : Les entreprises avec une culture d‚Äô√©galitarisme ou les start-ups peuvent √™tre id√©ales.",
    B:"Vous aimez la collaboration dirig√©e : Vous recherchez un √©quilibre entre autonomie et direction claire, comme dans les √©quipes projet.",
    C:"Vous appr√©ciez la clart√© avec autonomie : Un environnement avec des directives claires mais une grande libert√© d‚Äôex√©cution vous conviendra.",
    D:"Vous aimez les hi√©rarchies d√©finies : Les grandes entreprises ou les organisations traditionnelles avec une hi√©rarchie claire sont faites pour vous."
  },
  {
    title:"5. GESTION DES IMPR√âVUS :",
    A:"Vous aimez les impr√©vus : Les environnements impr√©visibles comme ceux des startups, ou des m√©tiers de terrain sont id√©als.",
    B:"Vous cherchez des solutions en √©quipe : Vous aimez les environnements collaboratifs o√π la solidarit√© est cl√©.",
    C:"Vous analysez avant d‚Äôagir : Les r√¥les analytiques ou de conseil o√π la r√©flexion pr√©c√®de l‚Äôaction vous conviendront.",
    D:"Vous minimisez les impr√©vus : Un travail structur√© avec des proc√©dures √©tablies, comme dans la finance ou l‚Äôadministration, pourrait vous convenir."
  },
  {
    title:"6. TYPES DE PROJETS INSPIRANTS :",
    A:"Cr√©ativit√© et innovation : Les m√©tiers dans le design, la publicit√©, ou l‚Äôart sont faits pour vous.",
    B:"Collaboration et √©quipe : Les r√¥les dans la gestion de projet ou le travail social sont parfaits.",
    C:"Recherche et pr√©cision : Vous excellez dans les m√©tiers acad√©miques, scientifiques, ou techniques.",
    D:"Processus et r√©p√©tition : Les m√©tiers avec des t√¢ches r√©currentes et bien d√©finies, comme la comptabilit√© ou la gestion, vous conviennent."
  },
  {
    title:"7. √âQUILIBRE VIE PROFESSIONNELLE ET PERSONNELLE :",
    A:"Vous int√©grez le travail √† votre vie : Vous pourriez appr√©cier les m√©tiers o√π le travail et la passion se rejoignent, comme les entrepreneurs.",
    B:"Vous cherchez la flexibilit√© : Les m√©tiers avec des horaires flexibles ou en freelance sont id√©aux pour vous.",
    C:"Vous aimez un √©quilibre d√©fini : Un travail avec des horaires r√©guliers et fixes est parfait.",
    D:"Vous valorisez un temps personnel bien encadr√© : Les m√©tiers avec des horaires stricts, comme les emplois gouvernementaux ou administratifs, vous conviennent."
  },
  {
    title:"8. IMPORTANCE DE LA RECONNAISSANCE :",
    A:"Reconnaissance cr√©ative : Les m√©tiers o√π l'innovation est r√©compens√©e, comme dans les industries cr√©atives, sont pour vous.",
    B:"Reconnaissance en √©quipe : Les environnements o√π le travail d'√©quipe est valoris√© vous attirent.",
    C:"Reconnaissance discr√®te : Vous √™tes √† l‚Äôaise dans des r√¥les o√π le travail bien fait est reconnu sans grandes d√©monstrations.",
    D:"Reconnaissance formelle : Les m√©tiers dans des entreprises structur√©es avec des syst√®mes de reconnaissance officiels vous conviennent."
  }
];

/* ‚ÄúMissions‚Äù (pour remplacer les exercices √† √©crire) ‚Äî sans champs */
const MISSIONS = [
  {
    title:"CE QUE J‚ÄôAIME FAIRE POURQUOI ?",
    text:"1. Listez ce que vous aimez :",
    choices:["Je l‚Äôai fait","Je le ferai plus tard","Je passe"]
  },
  {
    title:"CE QUE J‚ÄôAIME FAIRE POURQUOI ?",
    text:"Et qu‚Äôest-ce que vous aimez dans ces activit√©s ?",
    choices:["Je l‚Äôai fait","Je le ferai plus tard","Je passe"]
  },
  {
    title:"Exercice 4 : Cr√©ation d‚Äôune vision √† long terme",
    text:"1. Imaginez votre journ√©e id√©ale au travail : D√©crivez en d√©tail une journ√©e typique dans le m√©tier que vous visez. Quelles t√¢ches r√©alisez-vous ? Dans quel environnement travaillez-vous ?",
    choices:["Je l‚Äôai imagin√©e","Je le ferai plus tard","Je passe"]
  },
  {
    title:"Exercice 4 : Recherche de m√©tier",
    text:"2.√âtablissez un plan d'action : √ânum√©rez les √©tapes √† suivre pour atteindre cet objectif. Quelle formation devez-vous suivre ? Quelles comp√©tences devez-vous d√©velopper ?.",
    choices:["Je sais par o√π commencer","J‚Äôai besoin d‚Äôaide","Je passe"]
  }
];

/* Interpr√©tations A-D */
const INTERP = {
  A:`Si vous avez majoritairement choisi des r√©ponses A :
Vous √™tes une personne qui aime l'aventure et l'impr√©vu. Vous √™tes attir√© par des environnements dynamiques et cr√©atifs o√π chaque jour apporte de nouveaux d√©fis. Vous prosp√©rez dans des m√©tiers o√π l'innovation est au c≈ìur de l'activit√©, comme les startups, les industries cr√©atives (publicit√©, design, cin√©ma), ou les r√¥les dans l'entrepreneuriat. Vous n'avez pas peur de l'inconnu et aimez avoir la libert√© de cr√©er, d'exp√©rimenter, et de prendre des initiatives. L'autonomie et la capacit√© d'improviser sont essentielles pour vous, et vous appr√©ciez les structures organisationnelles plates o√π les id√©es comptent plus que la hi√©rarchie.`,
  B:`2. Si vous avez majoritairement choisi des r√©ponses B :
Vous √™tes motiv√© par le travail d'√©quipe et la collaboration. Vous appr√©ciez les environnements o√π les √©changes sont fr√©quents et o√π vous pouvez brainstormer avec vos coll√®gues pour trouver des solutions cr√©atives. Les m√©tiers dans la gestion de projet, les services sociaux, ou les environements √©ducatifs pourraient √™tre bien adapt√©s √† votre style. Vous recherchez des structures o√π la communication est ouverte et o√π il existe un √©quilibre entre direction et collaboration. Le travail en √©quipe est essentiel pour vous, et vous vous √©panouissez dans des environnements qui valorisent l'interaction et le soutien mutuel.`,
  C:`3. Si vous avez majoritairement choisi des r√©ponses C :
Vous √™tes une personne qui valorise l'autonomie et la r√©flexion approfondie. Vous pr√©f√©rez les environnements calmes et structur√©s o√π vous pouvez travailler √† votre propre rythme sans distractions. Les m√©tiers dans la recherche, l'analyse, ou le d√©veloppement technique, o√π la pr√©cision et la planification sont cruciales, sont id√©aux pour vous. Vous aimez avoir des directives claires, mais avec la libert√© d'ex√©cution. L'√©quilibre entre vie professionnelle et personnelle est important pour vous, et vous appr√©ciez des horaires bien d√©finis qui vous permettent de vous concentrer pleinement sur vos t√¢ches.`,
  D:`4. Si vous avez majoritairement choisi des r√©ponses D :
Vous √™tes quelqu'un qui prosp√®re dans des environnements bien organis√©s et structur√©s. Vous pr√©f√©rez des r√¥les o√π les processus sont √©tablis et o√π les attentes sont claires, comme dans l'administration, la gestion, ou la finance. La stabilit√© et la pr√©visibilit√© sont importantes pour vous, et vous aimez suivre des routines qui garantissent des r√©sultats constants. Vous appr√©ciez une hi√©rarchie bien d√©finie o√π les responsabilit√©s sont distinctes, et vous √™tes motiv√© par la reconnaissance formelle de votre travail. Un emploi avec des horaires fixes et des r√®gles bien √©tablies vous permettra de vous √©panouir.`
};

/* Construction des √©crans :
   0 = intro (mission start)
   ensuite 4 missions (sans saisie)
   ensuite 8 questions A-D
   puis r√©sum√©
*/
const SCREENS = [
  { type:"intro" },
  ...MISSIONS.map(m => ({ type:"mission", ...m })),
  ...QUIZ.map(q => ({ type:"quiz", ...q })),
  { type:"result" }
];

const state = {
  idx: 0,
  missions: Array(MISSIONS.length).fill(null),  // 0..2
  quiz: Array(QUIZ.length).fill(null),          // "A".."D"
};

function save(){ localStorage.setItem(LS_KEY, JSON.stringify(state)); }
function load(){
  const raw = localStorage.getItem(LS_KEY);
  if(!raw) return;
  try{
    const d = JSON.parse(raw);
    if(d && Array.isArray(d.quiz) && Array.isArray(d.missions)){
      state.idx = d.idx ?? 0;
      state.quiz = d.quiz;
      state.missions = d.missions;
    }
  }catch(e){}
}

function resetAll(){
  if(!confirm("R√©initialiser tout ?")) return;
  localStorage.removeItem(LS_KEY);
  location.reload();
}

const screen = document.getElementById("screen");
const title = document.getElementById("title");
const body = document.getElementById("body");
const stepInfo = document.getElementById("stepInfo");
const bar = document.getElementById("bar");
const kicker = document.getElementById("kicker");
document.getElementById("btnReset").addEventListener("click", resetAll);

document.getElementById("btnStart").addEventListener("click", ()=>go(1));
document.getElementById("btnJumpResult").addEventListener("click", ()=>go(SCREENS.length-1));

function totals(){
  const t = {A:0,B:0,C:0,D:0};
  state.quiz.forEach(v=>{ if(v && t[v]!==undefined) t[v]++; });
  return t;
}
function major(t){
  const order=["A","B","C","D"];
  let m="A";
  order.forEach(l=>{ if(t[l] > t[m]) m=l; });
  return m;
}

function go(i){
  state.idx = Math.max(0, Math.min(i, SCREENS.length-1));
  render();
  save();
  window.scrollTo({top:0, behavior:"smooth"});
}

function next(){
  if(state.idx < SCREENS.length-1) go(state.idx+1);
}
function back(){
  if(state.idx > 0) go(state.idx-1);
}

function render(){
  const s = SCREENS[state.idx];
  const pct = Math.round(((state.idx+1)/SCREENS.length)*100);
  bar.style.width = pct + "%";
  stepInfo.textContent = `√âcran ${state.idx+1}/${SCREENS.length}`;

  // kicker couleur par type
  kicker.className = "kicker " + (s.type==="quiz" ? "k2" : s.type==="mission" ? "k3" : s.type==="result" ? "k4" : "k1");

  body.innerHTML = "";

  if(s.type === "intro"){
    title.textContent = "Pr√™t¬∑e ?";
    const box = document.createElement("div");
    box.className = "resultBox";
    box.innerHTML = `
      <div style="font-weight:1000;font-size:16px;color:rgba(0,0,0,.86)">Tu vas faire un parcours en choix.</div>
      <div style="margin-top:8px;font-weight:700;color:rgba(0,0,0,.72)">Aucun texte √† √©crire. Tu peux revenir en arri√®re quand tu veux.</div>
      <div class="footerNav" style="margin-top:12px;">
        <button class="primary" type="button" id="go">‚ñ∂Ô∏è Commencer</button>
      </div>
    `;
    body.appendChild(box);
    document.getElementById("go").addEventListener("click", ()=>go(1));
    return;
  }

  if(s.type === "mission"){
    title.textContent = s.title;
    const q = document.createElement("div");
    q.className = "question";
    q.textContent = s.text; // texte du livret affich√©
    body.appendChild(q);

    const idxMission = state.idx - 1; // missions commencent √† 1
    const row = document.createElement("div");
    row.className = "missionRow";

    s.choices.forEach((label, k)=>{
      const btn = document.createElement("button");
      btn.type="button";
      btn.className = "missionBtn " + (k===0?"m1":k===1?"m2":"m3");
      btn.textContent = label;
      btn.addEventListener("click", ()=>{
        state.missions[idxMission] = k;
        save();
        next();
      });
      row.appendChild(btn);
    });

    body.appendChild(row);

    const nav = document.createElement("div");
    nav.className = "footerNav";
    nav.innerHTML = `
      <button class="ghost" type="button" id="back">‚¨ÖÔ∏è Retour</button>
      <button class="ghost" type="button" id="skip">‚è≠Ô∏è Passer</button>
    `;
    body.appendChild(nav);
    document.getElementById("back").addEventListener("click", back);
    document.getElementById("skip").addEventListener("click", next);
    return;
  }

  if(s.type === "quiz"){
    title.textContent = "Quiz";
    const q = document.createElement("div");
    q.className = "question";
    q.textContent = s.title;
    body.appendChild(q);

    const wrap = document.createElement("div");
    wrap.className = "choices";

    // index quiz = idx - 1 - MISSIONS.length
    const qIndex = state.idx - 1 - MISSIONS.length;

    ["A","B","C","D"].forEach(letter=>{
      const div = document.createElement("div");
      div.className = "choice" + (state.quiz[qIndex]===letter ? " selected":"");
      div.innerHTML = `
        <span class="badge ${letter}">${letter}</span>
        <span>${s[letter]}</span>
      `;
      div.addEventListener("click", ()=>{
        state.quiz[qIndex] = letter;
        save();
        next(); // auto-advance
      });
      wrap.appendChild(div);
    });

    body.appendChild(wrap);

    const nav = document.createElement("div");
    nav.className = "footerNav";
    nav.innerHTML = `
      <button class="ghost" type="button" id="back">‚¨ÖÔ∏è Retour</button>
      <button class="ghost" type="button" id="skip">‚è≠Ô∏è Passer</button>
    `;
    body.appendChild(nav);
    document.getElementById("back").addEventListener("click", back);
    document.getElementById("skip").addEventListener("click", next);
    return;
  }

  if(s.type === "result"){
    title.textContent = "R√©sum√©";
    const t = totals();
    const m = major(t);

    const box = document.createElement("div");
    box.className = "resultBox";
    box.innerHTML = `
      <div style="font-weight:1000;font-size:16px;color:rgba(0,0,0,.86)">R√©sultat (Quiz A-D)</div>
      <div class="pills">
        <span class="p pA"><i></i>Nombre total de A : <strong>${t.A}</strong></span>
        <span class="p pB"><i></i>Nombre total de B : <strong>${t.B}</strong></span>
        <span class="p pC"><i></i>Nombre total de C : <strong>${t.C}</strong></span>
        <span class="p pD"><i></i>Nombre total de D : <strong>${t.D}</strong></span>
      </div>
      <div style="margin-top:10px;font-weight:1000;">Majorit√© : ${m}</div>
      <div style="margin-top:8px;white-space:pre-wrap;font-weight:700;color:rgba(0,0,0,.78)">${INTERP[m]}</div>

      <div style="margin-top:14px;font-weight:1000;">Missions (sans saisie)</div>
      <div style="margin-top:6px;font-weight:700;color:rgba(0,0,0,.72)">
        ${MISSIONS.map((mm, i)=>`‚Ä¢ ${mm.text} ‚Üí ${state.missions[i]===null ? "Non r√©pondu" : mm.choices[state.missions[i]]}`).join("<br>")}
      </div>

      <div class="footerNav" style="margin-top:14px;">
        <button class="ghost" type="button" id="back">‚¨ÖÔ∏è Retour</button>
        <button class="primary" type="button" id="restart">üîÅ Recommencer</button>
      </div>
    `;
    body.appendChild(box);
    document.getElementById("back").addEventListener("click", back);
    document.getElementById("restart").addEventListener("click", resetAll);
    return;
  }
}

load();
render();
</script>
</body>
</html>


